---
title: "Assessing Class Size Effect on Math Scores for First Graders"
output: 
  html_document:
    df_print: paged
    fig_caption: yes
    number_sections: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```
***

Team ID: 4

Min Kim ()

Kenneth Broadhead ()

Nanhao Chen ()

Koral Buch ()

***

# Introduction
## Background

The Student/Teacher Achievement Ratio (STAR) Project was a four-year study in the late 1980s in Tennessee, which assessed the effect of class size on the students’ academic performance (math and reading scores) of the Stanford Achievement Test (SAT). The study consisted of students from kindergarten with continuation to third grade and teachers being randomly assigned to one of three class types:

* [Control group] regular class (22 to 25 students per teacher)

* [Treatment group I] small class (13 to 17 students per teacher)

* [Treatment group II] regular-with-aide class (22 to 25 students with a full-time teacher's aide)

The study provides additional information about the students, such as gender and ethnicity, and the teachers, such as a number of years of experience and level of education. The effect of these variables on the test scores can be estimated as well.

## Objective
In this project, we analyze the data from Project STAR, focusing on first grade. The primary question of interest is whether class type affects the students’ math scores in the SAT. In this project, we would like to estimate the change in the math score for each treatment group given the control group.

## Statistical Analysis
To answer our main question of interest, we designed a one-way ANOVA model and obtained basic properties. The dependent variable is the math test scores for first grade, and the independent variable is the class type. For statistical inference, we tested the null hypothesis among the different groups.

# Results
## Missing Values
The data contain 11,598 observations. We are interested only in those that have data for the relevant treatment, i.e. have values or the star1 variable. We therefore trim the data set accordingly. Of the remaining 6829, there are 229 observations that do not have a first grade math score (**math1**). Due to the large number of observations, we simply delete these observations. We first investigate whether or not these observations can be considered as random, or if there is some problematic bias that might be introduced by deleting them. We investigate the variables pertaining to **gender**, **location**, **ethnicity**, and possible economic indicators (free lunch, **lunch1**). The only variable posing a potential problem is the free lunch variable, where a larger proportion of students missing a **math1** qualified for free lunch than those in the complete (no missing values) data set.  However, this difference is not too extreme. Plus, the portion of free lunch in the remaining data is consistent with the original data; we thus think it appropriate to proceed with further analysis. This should be noted for follow up studies and may need to be investigated further. The other variables considered showed a roughly similar distribution between the students missing a **math1** score, and those who had one recorded.

```{r message=FALSE, include=FALSE}
library(AER)
data("STAR")
```

```{r}
STAR$star1 <- as.factor(STAR$star1)
# create a subset for 1st grade with removing all the NA data in star1 and math1
subset1 <- subset(STAR, (!is.na(STAR$star1))&(!is.na(STAR$math1)))
# create a subset for 1st grade with removing all the NA data in star1 and keep NA in math1
subset1_NA <- subset(STAR, (!is.na(STAR$star1))&(is.na(STAR$math1)))
```

## Descriptive Analysis
In Figure 1, summary statistics of **math1** and **star1** variables are shown, including the histogram distribution of **math1**, and the pie chart of treatment groups. Summary statistics for other potentially relevant (but unanalyzed in this report) variables are found above, such as **gender**, **ethnicity**, and others variables, in the analysis for roughly equal distributions between students with missing and recorded **math1** scores. According the boxplot in Figure 2, the **math1** scores of different class sizes suggest that class size has an effect on the average of the mathematics scores. The distributions of each math score population shows some slight deviation from normality, but this deviation doesn’t appear to be extreme (see below). Furthermore, the standard deviations of each populations don’t appear to be extremely different.

```{r}
par(mfrow=c(1,3), pty="s")
hist(subset1$math1[subset1$star1=='regular'], main='At the Reg Level', xlab='1st grade math score')
hist(subset1$math1[subset1$star1=='small'], main='At the Small Level', xlab='1st grade math score')
hist(subset1$math1[subset1$star1=='regular+aide'], main='At the Reg Level with Aide', xlab='1st grade math score')
```

```{r fig.width = 5, fig.height = 5}
par(mfrow=c(1,2))
pie(table(STAR$star1), main='Class Type')
pie(table(subset1$star1), main='Class Type in 1st Grade')
# par(mfrow=c(1,2))
pie(table(STAR$gender), main='Gender')
pie(table(subset1$gender), main='Gender in 1st Grade')
# par(mfrow=c(1,2))
pie(table(STAR$lunch1), main='Eligibility for Free Lunch')
pie(table(subset1$lunch1), main='Eligibility for Free Lunch in 1st Grade')
# par(mfrow=c(1,2))
pie(table(STAR$school1), main='School Type')
pie(table(subset1$school1), main='School Type in 1st Grade')
# par(mfrow=c(1,2))
pie(table(STAR$ethnicity), main='Ethnicity')
pie(table(subset1$ethnicity), main='Ethnicity in 1st Grade')
```




